#define		XFERCNTaddr		0xA01B19#define		XFERTOaddr		0xA01B1A#define		XFERFROMaddr	0xA01B1C// call this proc alot, but not too much, since it holds the Z80void ServiceZ80DMA(){	short 	cnt, i;	long	toptr, fromptr;		gemsholdz80();	if (cnt = *(char *)XFERCNTaddr) {		// if there are bytes waiting to be xfered...			// the xfer-to address is a 16 bit value at XFERTOaddr in Z80 RAM		// adding 0xA00000 translates this z80 address to the addr as seen from 68000 space				toptr = 0xA00000 + (*(unsigned char *)XFERTOaddr) + ((*(unsigned char *)(XFERTOaddr + 1)) << 8);				// the xfer-from address is a 24 bit value at XFERFROMaddr in Z80 RAM				fromptr = (*(unsigned char *)XFERFROMaddr) + ((*(unsigned char *)(XFERFROMaddr + 1)) << 8) +			((*(unsigned char *)(XFERFROMaddr + 2)) << 16);					// and here's the xfer itself:				while (cnt--) (*(unsigned char *)(toptr++)) = (*(unsigned char *)(fromptr++));					// clearing the byte count (in the Z80 RAM) tells the Z80 that the xfer is complete				(*(unsigned char *)XFERCNTaddr) = 0;	}	gemsreleasez80();}	